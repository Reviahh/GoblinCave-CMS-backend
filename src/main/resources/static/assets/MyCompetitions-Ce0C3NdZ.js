const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/competition-DDRzTI-D.js","assets/index-LBqe1eNs.js","assets/index-Dc8zltW3.css","assets/submission-DCFVV_C6.js"])))=>i.map(i=>d[i]);
import{_ as Q,z as me,r as $,c as G,J as W,g as c,h as ee,d as z,e as i,j as H,m as _,A as P,w as e,f as t,i as s,t as m,E as T,x as he,l as k,X as ke,q as pe,Y as we,Z as Se,o as Ie,V as ce,u as Ce,F as se,v as re}from"./index-LBqe1eNs.js";import{u as fe}from"./team-DUt-q28F.js";import{useCompetitionStore as _e}from"./competition-BeX1I71u.js";import{useRecruitmentStore as Re}from"./recruitment-BogGKxph.js";import{listCompetitionRegistrations as xe,reviewRegistration as $e}from"./competition-DDRzTI-D.js";import{listSubmissions as Te,scoreSubmission as Ve,getCompetitionRank as ze}from"./submission-DCFVV_C6.js";const Ne={class:"registration-review"},De={key:2,style:{color:"#999"}},Le={__name:"RegistrationReview",props:{competitionId:{type:Number,required:!0}},emits:["refresh"],setup(J,{expose:N,emit:M}){const w=fe(),S=me(),V=_e(),I=J,b=M,C=$([]),R=$(!1);G(()=>{const v={};return w.teams.forEach(o=>{v[o.teamId]=o}),v});async function r(){if(I.competitionId){R.value=!0;try{const[v,o]=await Promise.all([xe(I.competitionId),S.fetchCurrentUser()]),d=v?.data?.data||[],y=await Promise.all(d.map(async p=>{let L="-";p.teamId&&(L=(await w.fetchTeamDetail(p.teamId))?.team?.name||"-");let q=p.userId;o&&p.userId===o.id&&(q=o.username);const f=V.competitions.find(B=>B.id===p.competitionId)?.maxMembers>1;return{...p,username:q,teamName:L,isTeamMode:f}}));C.value=y}catch(v){console.error("loadRegistrations error",v),T.error("åŠ è½½æŠ¥ååˆ—è¡¨å¤±è´¥")}finally{R.value=!1}}}async function x(v,o){const d=o===1?"é€šè¿‡":"æ‹’ç»";try{await he.confirm(`ç¡®å®šè¦${d}è¯¥æŠ¥åå—ï¼Ÿ`,"å®¡æ ¸ç¡®è®¤",{confirmButtonText:"ç¡®å®š",cancelButtonText:"å–æ¶ˆ",type:o===1?"success":"warning"});const y=await $e({registrationId:v.id,status:o});y?.data?.code===0?(T.success(`${d}æˆåŠŸ`),await r(),b("refresh")):T.error(y?.data?.message||`${d}å¤±è´¥`)}catch(y){y!=="cancel"&&(console.error("handleReview error",y),T.error(`${d}å¤±è´¥ï¼š`+(y.response?.data?.message||y.message)))}}function F(v){return{0:"warning",1:"success",2:"danger"}[v]||"info"}function U(v){return{0:"å¾…å®¡æ ¸",1:"å·²é€šè¿‡",2:"å·²æ‹’ç»"}[v]||"æœªçŸ¥"}function D(v){return v?new Date(v).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}return W(()=>I.competitionId,v=>{v&&r()},{immediate:!0}),N({loadRegistrations:r}),(v,o)=>{const d=c("el-table-column"),y=c("el-tag"),p=c("el-button"),L=c("el-table"),q=c("el-empty"),X=ee("loading");return i(),z("div",Ne,[H((i(),_(L,{data:C.value,border:"",stripe:""},{default:e(()=>[t(d,{prop:"id",label:"æŠ¥åID",width:"80"}),t(d,{label:"æŠ¥åç±»å‹",width:"100"},{default:e(({row:f})=>[t(y,{type:f.isTeamMode?"success":"info"},{default:e(()=>[s(m(f.isTeamMode?"éƒ¨è½æˆ˜":"å•äººè¯•ç‚¼"),1)]),_:2},1032,["type"])]),_:1}),t(d,{label:"æ±‚å­¦å“¥å¸ƒæ—/é…‹é•¿",width:"120"},{default:e(({row:f})=>[s(m(f.username||f.userId),1)]),_:1}),t(d,{label:"éƒ¨è½åç§°",width:"150"},{default:e(({row:f})=>[s(m(f.teamName||"-"),1)]),_:1}),t(d,{label:"æŠ¥åæ—¶é—´",width:"160"},{default:e(({row:f})=>[s(m(D(f.createTime)),1)]),_:1}),t(d,{label:"çŠ¶æ€",width:"100"},{default:e(({row:f})=>[t(y,{type:F(f.status)},{default:e(()=>[s(m(U(f.status)),1)]),_:2},1032,["type"])]),_:1}),t(d,{label:"æ“ä½œ",width:"220",fixed:"right"},{default:e(({row:f})=>[f.status===0?(i(),_(p,{key:0,type:"success",size:"small",onClick:B=>x(f,1)},{default:e(()=>[...o[0]||(o[0]=[s(" é€šè¿‡ ",-1)])]),_:1},8,["onClick"])):P("",!0),f.status===0?(i(),_(p,{key:1,type:"danger",size:"small",onClick:B=>x(f,2)},{default:e(()=>[...o[1]||(o[1]=[s(" æ‹’ç» ",-1)])]),_:1},8,["onClick"])):P("",!0),f.status!==0?(i(),z("span",De,"å·²å®¡æ ¸")):P("",!0)]),_:1})]),_:1},8,["data"])),[[X,R.value]]),!R.value&&C.value.length===0?(i(),_(q,{key:0,description:"æš‚æ— æŠ¥åè®°å½•"})):P("",!0)])}}},Me=Q(Le,[["__scopeId","data-v-f08c01e4"]]),Pe={class:"scoring-panel"},Ue={__name:"ScoringPanel",props:{competitionId:{type:Number,required:!0}},emits:["refresh","view-detail"],setup(J,{expose:N,emit:M}){const w=J,S=M,V=$([]),I=$(!1),b=$(!1),C=$(!1),R=$(null),r=$({score:null,comment:""});async function x(){if(w.competitionId){I.value=!0;try{const o=await Te({competitionId:w.competitionId});V.value=o?.data?.data||[]}catch(o){console.error("loadSubmissions error",o),T.error("åŠ è½½ä½œå“åˆ—è¡¨å¤±è´¥")}finally{I.value=!1}}}function F(o){R.value=o,r.value={score:o.score??null,comment:o.comment||""},b.value=!0}async function U(){if(r.value.score==null)return T.warning("è¯·è¾“å…¥è¯„åˆ†");if(r.value.score<0||r.value.score>100)return T.warning("è¯„åˆ†èŒƒå›´ä¸º0-100");C.value=!0;try{const o=await Ve({submissionId:R.value.id,score:r.value.score,comment:r.value.comment});o?.data?.code===0?(T.success("è¯„åˆ†æˆåŠŸ"),b.value=!1,await x(),S("refresh")):T.error(o?.data?.message||"è¯„åˆ†å¤±è´¥")}catch(o){console.error("submitScore error",o),T.error("è¯„åˆ†å¤±è´¥ï¼š"+(o.response?.data?.message||o.message))}finally{C.value=!1}}function D(o){S("view-detail",o)}function v(o){return o?new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}return W(()=>w.competitionId,o=>{o&&x()},{immediate:!0}),N({loadSubmissions:x}),(o,d)=>{const y=c("el-table-column"),p=c("el-tag"),L=c("el-button"),q=c("el-table"),X=c("el-empty"),f=c("el-form-item"),B=c("el-input-number"),te=c("el-input"),ne=c("el-form"),le=c("el-dialog"),ae=ee("loading");return i(),z("div",Pe,[H((i(),_(q,{data:V.value,border:"",stripe:""},{default:e(()=>[t(y,{prop:"id",label:"æˆ˜åˆ©å“ID",width:"80"}),t(y,{label:"ä¸Šäº¤ç±»å‹",width:"100"},{default:e(({row:g})=>[t(p,{type:g.teamId?"success":"info"},{default:e(()=>[s(m(g.teamId?"éƒ¨è½æˆ˜åˆ©å“":"å•äººæˆ˜åˆ©å“"),1)]),_:2},1032,["type"])]),_:1}),t(y,{label:"ä¸Šäº¤è€…/éƒ¨è½",width:"150"},{default:e(({row:g})=>[s(m(g.teamName||g.username||g.userId),1)]),_:1}),t(y,{prop:"description",label:"æˆ˜åˆ©å“æè¿°","min-width":"200"}),t(y,{label:"ä¸Šäº¤æ—¶é—´",width:"160"},{default:e(({row:g})=>[s(m(v(g.submitTime||g.createTime)),1)]),_:1}),t(y,{label:"å½“å‰æˆ˜åŠ›å€¼",width:"100"},{default:e(({row:g})=>[k("span",{style:ke({color:g.score!=null?"#67C23A":"#909399"})},m(g.score!=null?g.score:"æœªé‰´å®š"),5)]),_:1}),t(y,{label:"æ“ä½œ",width:"180",fixed:"right"},{default:e(({row:g})=>[t(L,{type:"primary",size:"small",onClick:oe=>F(g)},{default:e(()=>[s(m(g.score!=null?"é‡æ–°é‰´å®š":"é‰´å®š"),1)]),_:2},1032,["onClick"]),t(L,{size:"small",onClick:oe=>D(g)},{default:e(()=>[...d[4]||(d[4]=[s(" æŸ¥çœ‹è¯¦æƒ… ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[ae,I.value]]),!I.value&&V.value.length===0?(i(),_(X,{key:0,description:"æš‚æ— æˆ˜åˆ©å“ä¸Šäº¤"})):P("",!0),t(le,{modelValue:b.value,"onUpdate:modelValue":d[3]||(d[3]=g=>b.value=g),title:"æˆ˜åˆ©å“é‰´å®š",width:"500px"},{footer:e(()=>[t(L,{onClick:d[2]||(d[2]=g=>b.value=!1)},{default:e(()=>[...d[6]||(d[6]=[s("å–æ¶ˆ",-1)])]),_:1}),t(L,{type:"primary",onClick:U,loading:C.value},{default:e(()=>[...d[7]||(d[7]=[s(" ç¡®å®šé‰´å®š ",-1)])]),_:1},8,["loading"])]),default:e(()=>[t(ne,{model:r.value,"label-width":"80px"},{default:e(()=>[t(f,{label:"æˆ˜åˆ©å“æ ‡é¢˜"},{default:e(()=>[k("span",null,m(R.value?.title),1)]),_:1}),t(f,{label:"ä¸Šäº¤è€…"},{default:e(()=>[k("span",null,m(R.value?.teamName||R.value?.username||R.value?.userId),1)]),_:1}),t(f,{label:"è¯„åˆ†",required:""},{default:e(()=>[t(B,{modelValue:r.value.score,"onUpdate:modelValue":d[0]||(d[0]=g=>r.value.score=g),min:0,max:100,precision:1,step:.5,"controls-position":"right"},null,8,["modelValue"]),d[5]||(d[5]=k("span",{style:{"margin-left":"10px",color:"#909399"}},"æ»¡åˆ†100æˆ˜åŠ›",-1))]),_:1}),t(f,{label:"è¨æ»¡è¯„è¯­"},{default:e(()=>[t(te,{modelValue:r.value.comment,"onUpdate:modelValue":d[1]||(d[1]=g=>r.value.comment=g),type:"textarea",rows:4,placeholder:"è¯·è¾“å…¥è¨æ»¡è¯„è¯­ï¼ˆé€‰å¡«ï¼‰",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},Ee=Q(Ue,[["__scopeId","data-v-3ae706cc"]]),qe={class:"ranking-panel"},Be={class:"ranking-header"},Ae={style:{display:"flex","align-items":"center",gap:"8px"}},je={class:"score-display"},Oe={__name:"RankingPanel",props:{competitionId:{type:Number,required:!0}},setup(J,{expose:N}){const M=J,w=$([]),S=$(!1);async function V(){if(M.competitionId){S.value=!0;try{const r=await ze(M.competitionId);w.value=r?.data?.data||[]}catch(r){console.error("loadRanking error",r),T.error("åŠ è½½æˆ˜åŠ›æ¦œå¤±è´¥")}finally{S.value=!1}}}async function I(){await V(),T.success("æˆ˜åŠ›æ¦œå·²åˆ·æ–°")}function b(r){return r===1?"rank-gold":r===2?"rank-silver":r===3?"rank-bronze":""}function C(r){return r===1?"ğŸ¥‡":r===2?"ğŸ¥ˆ":r===3?"ğŸ¥‰":r}function R(r){return r?new Date(r).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-"}return W(()=>M.competitionId,r=>{r&&V()},{immediate:!0}),N({loadRanking:V,refreshRanking:I}),(r,x)=>{const F=c("el-icon"),U=c("el-button"),D=c("el-table-column"),v=c("el-tag"),o=c("el-table"),d=c("el-empty"),y=ee("loading");return i(),z("div",qe,[k("div",Be,[x[1]||(x[1]=k("h3",null,"è¯•ç‚¼æˆ˜åŠ›æ¦œ",-1)),t(U,{type:"success",onClick:I,loading:S.value},{default:e(()=>[t(F,null,{default:e(()=>[t(pe(we))]),_:1}),x[0]||(x[0]=s(" åˆ·æ–°æˆ˜åŠ›æ¦œ ",-1))]),_:1},8,["loading"])]),H((i(),_(o,{data:w.value,border:"",stripe:""},{default:e(()=>[t(D,{label:"æˆ˜åŠ›æ’å",width:"80",align:"center"},{default:e(({row:p,$index:L})=>[k("div",{class:Se(["rank-badge",b(L+1)])},m(C(L+1)),3)]),_:1}),t(D,{label:"æŒ‘æˆ˜è€…","min-width":"150"},{default:e(({row:p})=>[k("div",Ae,[t(v,{type:p.teamId?"success":"info",size:"small"},{default:e(()=>[s(m(p.teamId?"éƒ¨è½":"ç‹¬ç‹¼"),1)]),_:2},1032,["type"]),k("span",null,m(p.teamName||p.username||p.userId),1)])]),_:1}),t(D,{label:"æˆ˜åˆ©å“æè¿°","min-width":"200",prop:"description"}),t(D,{label:"æˆ˜åŠ›å€¼",width:"100",align:"center"},{default:e(({row:p})=>[k("div",je,m(p.score),1)]),_:1}),t(D,{label:"ä¸Šäº¤æ—¶é—´",width:"160"},{default:e(({row:p})=>[s(m(R(p.submitTime||p.createTime)),1)]),_:1}),t(D,{label:"è¨æ»¡è¯„è¯­","min-width":"150","show-overflow-tooltip":""},{default:e(({row:p})=>[s(m(p.comment||"-"),1)]),_:1})]),_:1},8,["data"])),[[y,S.value]]),!S.value&&w.value.length===0?(i(),_(d,{key:0,description:"æš‚æ— æˆ˜åŠ›æ•°æ®"},{description:e(()=>[...x[2]||(x[2]=[k("div",null,[k("p",{style:{"margin-bottom":"8px"}},"æš‚æ— æˆ˜åŠ›æ•°æ®"),k("p",{style:{"font-size":"12px",color:"#909399"}},"é‰´å®šåå°†è‡ªåŠ¨ç”Ÿæˆæˆ˜åŠ›æ¦œ")],-1)])]),_:1})):P("",!0)])}}},Fe=Q(Oe,[["__scopeId","data-v-23999966"]]),Je={class:"my-competitions-page"},Xe={key:0,style:{"min-height":"300px"}},Ye={key:1,class:"teacher-view"},Ze={class:"quick-actions"},Ge={class:"quick-actions"},He={class:"quick-actions"},Ke={key:2,class:"student-view"},Qe={style:{"margin-bottom":"16px",display:"flex","justify-content":"flex-end"}},We={key:1,style:{color:"#909399","font-size":"12px"}},et={key:2,style:{color:"#909399","font-size":"12px"}},tt={key:0,style:{color:"#67C23A","font-weight":"bold","font-size":"16px"}},nt={key:1,style:{color:"#909399","font-size":"12px"}},lt={style:{"font-size":"24px","font-weight":"bold",color:"#67C23A"}},at={style:{"white-space":"pre-wrap","line-height":"1.6"}},ot={__name:"MyCompetitions",setup(J){const N=Ce(),M=me(),w=fe(),S=_e(),V=Re();$({}),$({});const I=$("published"),b=$(null),C=$(!0),R=$(!1),r=$(null),x=G(()=>M.role==="admin");async function F(){C.value=!0;try{x.value?await S.fetchList():(w.teams=[],await Promise.all([w.fetchMyTeams(),S.fetchList(),V.fetchMyRecruitments()]),await q()),T.success("åˆ·æ–°æˆåŠŸ")}catch(a){T.error("åˆ·æ–°å¤±è´¥: "+a.message)}finally{C.value=!1}}Ie(async()=>{C.value=!0;try{x.value?(await S.fetchList(),I.value="published"):(await Promise.all([w.fetchMyTeams(),S.fetchList(),V.fetchMyRecruitments()]),I.value="joined",await q())}finally{C.value=!1}});const U=G(()=>S.competitions.filter(a=>a.creatorId===M.id)),D=G(()=>{const a=M.id;return w.teams.map(n=>{const h=S.competitions.find(u=>u.id===n.competitionId);return h?{competitionId:n.competitionId,competitionTitle:h.name,teamId:n.id,teamName:n.name,teamStatus:n.status,isLeader:n.userId===a,registrationStatus:n.registrationStatus,hasSubmission:n.hasSubmission||!1,score:n.score,comment:n.comment}:null}).filter(n=>n!==null)});W(D,a=>{console.log("myTeams æ›´æ–°äº†ï¼š",JSON.parse(JSON.stringify(a)))},{immediate:!0});const v=G(()=>V.myRecruitments.map(a=>{const n=S.competitions.find(h=>h.id===a.competitionId);return n?{...a,competitionName:n.name}:null}).filter(a=>a!==null));function o(a){return a?new Date(a).toLocaleDateString("zh-CN"):"-"}function d(a){return{0:"warning",1:"success",2:"danger"}[a]||"info"}function y(a){return{0:"å¾…å®¡æ ¸",1:"å·²é€šè¿‡",2:"å·²æ‹’ç»"}[a]||"æœªçŸ¥"}function p(a){return{0:"success",1:"warning",2:"info"}[a]||"info"}function L(a){return{0:"æ‹›å‹Ÿä¸­",1:"å·²æ»¡å‘˜",2:"å·²å…³é—­"}[a]||"æœªçŸ¥"}async function q(){if(!w.teams||w.teams.length===0){console.log("æ²¡æœ‰é˜Ÿä¼æ•°æ®ï¼Œè·³è¿‡åŠ è½½é¢å¤–ä¿¡æ¯");return}const{getMyRegistrationStatus:a}=await ce(async()=>{const{getMyRegistrationStatus:u}=await import("./competition-DDRzTI-D.js");return{getMyRegistrationStatus:u}},__vite__mapDeps([0,1,2])),{listSubmissions:n}=await ce(async()=>{const{listSubmissions:u}=await import("./submission-DCFVV_C6.js");return{listSubmissions:u}},__vite__mapDeps([3,1,2]));console.log(`å¼€å§‹åŠ è½½ ${w.teams.length} ä¸ªé˜Ÿä¼çš„é¢å¤–ä¿¡æ¯`);const h=w.teams.map(async u=>{try{const A=await a(u.competitionId,{silent:!0});if(A?(u.registrationStatus=A,console.log(`é˜Ÿä¼ ${u.name} (ç«èµ› ID: ${u.competitionId}) æŠ¥åçŠ¶æ€: ${A}`)):console.log(`é˜Ÿä¼ ${u.name} æœªæ‰¾åˆ°æŠ¥åè®°å½•`),u.registrationStatus===1)try{const E=await n({competitionId:u.competitionId,teamId:u.id},{silent:!0}),j=E?.data?.data?.list||E?.data?.data||[];if(j.length>0){const Y=j[0];u.hasSubmission=!0,u.score=Y.score,u.comment=Y.comment,console.log(`é˜Ÿä¼ ${u.name} å·²æäº¤ä½œå“ï¼Œè¯„åˆ†: ${u.score}`)}else u.hasSubmission=!1,console.log(`é˜Ÿä¼ ${u.name} æœªæäº¤ä½œå“`)}catch(E){console.warn(`æ£€æŸ¥é˜Ÿä¼ ${u.id} æäº¤çŠ¶æ€å¤±è´¥:`,E.message)}}catch(A){console.warn(`åŠ è½½é˜Ÿä¼ ${u.id} çš„æŠ¥åçŠ¶æ€å¤±è´¥:`,A.message)}});await Promise.allSettled(h),console.log("å®ŒæˆåŠ è½½æ‰€æœ‰é˜Ÿä¼çš„é¢å¤–ä¿¡æ¯")}function X(){b.value&&$(null).value?.loadRanking?.()}function f(a){r.value={competitionTitle:a.competitionTitle,teamName:a.teamName,score:a.score,comment:a.comment},R.value=!0}function B(a){N.push(`/competitions/${a}`)}function te(a){N.push({path:"/team-detail",query:{teamId:a}})}function ne(){N.push("/recruitments")}function le(a,n){N.push({path:`/submissions/${a}`,query:{competitionId:a,teamId:n}})}function ae(a){N.push(`/recruitments/${a}`)}function g(a){N.push("/admin/registrations?competitionId="+a)}function oe(a){N.push("/admin/submissions?competitionId="+a)}function ge(a){N.push(`/rankings/${a}`)}async function ve(a){try{await V.closeRecruitment(a),T.success("æ‹›å‹Ÿå·²å…³é—­"),await V.fetchMyRecruitments()}catch(n){T.error("å…³é—­å¤±è´¥: "+n.message)}}return(a,n)=>{const h=c("el-table-column"),u=c("el-button"),A=c("el-table"),E=c("el-empty"),j=c("el-tab-pane"),Y=c("el-option"),ie=c("el-select"),ue=c("el-tabs"),Z=c("el-tag"),K=c("el-descriptions-item"),ye=c("el-descriptions"),be=c("el-dialog"),de=ee("loading");return i(),z("div",Je,[k("h2",null,m(x.value?"æˆ‘å‘å¸ƒçš„è¯•ç‚¼":"æˆ‘çš„è¯•ç‚¼"),1),C.value?H((i(),z("div",Xe,null,512)),[[de,!0]]):x.value?(i(),z("div",Ye,[t(ue,{modelValue:I.value,"onUpdate:modelValue":n[3]||(n[3]=l=>I.value=l),type:"card"},{default:e(()=>[t(j,{label:"æˆ‘å‘å¸ƒçš„è¯•ç‚¼",name:"published"},{default:e(()=>[t(A,{data:U.value,border:""},{default:e(()=>[t(h,{prop:"name",label:"è¯•ç‚¼åç§°"}),t(h,{label:"ä¸»åŠç¥­å¸",width:"150"},{default:e(()=>[s(m(pe(M).userName||"æˆ‘"),1)]),_:1}),t(h,{label:"æ—¶é—´",width:"200"},{default:e(({row:l})=>[s(m(o(l.startTime))+" ~ "+m(o(l.endTime)),1)]),_:1}),t(h,{label:"æ“ä½œ",width:"350",fixed:"right"},{default:e(({row:l})=>[t(u,{size:"small",onClick:O=>B(l.id)},{default:e(()=>[...n[7]||(n[7]=[s("æŸ¥çœ‹è¯¦æƒ…",-1)])]),_:1},8,["onClick"]),t(u,{size:"small",type:"primary",onClick:O=>g(l.id)},{default:e(()=>[...n[8]||(n[8]=[s("æŠ¥åå®¡æ ¸",-1)])]),_:1},8,["onClick"]),t(u,{size:"small",type:"success",onClick:O=>oe(l.id)},{default:e(()=>[...n[9]||(n[9]=[s("æˆ˜åˆ©å“é‰´å®š",-1)])]),_:1},8,["onClick"]),t(u,{size:"small",type:"warning",onClick:O=>ge(l.id)},{default:e(()=>[...n[10]||(n[10]=[s("æˆ˜åŠ›æ’è¡Œ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"]),U.value.length===0?(i(),_(E,{key:0,description:"æš‚æœªå‘å¸ƒè¯•ç‚¼"})):P("",!0)]),_:1}),t(j,{label:"æŠ¥åå®¡æ ¸",name:"registrations"},{default:e(()=>[k("div",Ze,[t(ie,{modelValue:b.value,"onUpdate:modelValue":n[0]||(n[0]=l=>b.value=l),placeholder:"é€‰æ‹©è¯•ç‚¼",clearable:"",style:{width:"300px"}},{default:e(()=>[(i(!0),z(se,null,re(U.value,l=>(i(),_(Y,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),b.value?(i(),_(Me,{key:0,"competition-id":b.value,ref:"reviewRef"},null,8,["competition-id"])):(i(),_(E,{key:1,description:"è¯·å…ˆé€‰æ‹©è¯•ç‚¼"}))]),_:1}),t(j,{label:"æˆ˜åˆ©å“é‰´å®š",name:"submissions"},{default:e(()=>[k("div",Ge,[t(ie,{modelValue:b.value,"onUpdate:modelValue":n[1]||(n[1]=l=>b.value=l),placeholder:"é€‰æ‹©è¯•ç‚¼",clearable:"",style:{width:"300px"}},{default:e(()=>[(i(!0),z(se,null,re(U.value,l=>(i(),_(Y,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),b.value?(i(),_(Ee,{key:0,"competition-id":b.value,ref:"scoringRef",onRefresh:X},null,8,["competition-id"])):(i(),_(E,{key:1,description:"è¯·å…ˆé€‰æ‹©è¯•ç‚¼"}))]),_:1}),t(j,{label:"æˆ˜åŠ›æ’è¡Œ",name:"rankings"},{default:e(()=>[k("div",He,[t(ie,{modelValue:b.value,"onUpdate:modelValue":n[2]||(n[2]=l=>b.value=l),placeholder:"é€‰æ‹©è¯•ç‚¼",clearable:"",style:{width:"300px"}},{default:e(()=>[(i(!0),z(se,null,re(U.value,l=>(i(),_(Y,{key:l.id,label:l.name,value:l.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),b.value?(i(),_(Fe,{key:0,"competition-id":b.value,ref:"rankingRef"},null,8,["competition-id"])):(i(),_(E,{key:1,description:"è¯·å…ˆé€‰æ‹©è¯•ç‚¼"}))]),_:1})]),_:1},8,["modelValue"])])):(i(),z("div",Ke,[t(ue,{modelValue:I.value,"onUpdate:modelValue":n[4]||(n[4]=l=>I.value=l),type:"card"},{default:e(()=>[t(j,{label:"æˆ‘å‚åŠ çš„è¯•ç‚¼",name:"joined"},{default:e(()=>[k("div",Qe,[t(u,{icon:C.value?"Loading":"Refresh",loading:C.value,onClick:F},{default:e(()=>[...n[11]||(n[11]=[s(" åˆ·æ–°æ•°æ® ",-1)])]),_:1},8,["icon","loading"])]),H((i(),_(A,{data:D.value,border:""},{default:e(()=>[t(h,{prop:"competitionTitle",label:"è¯•ç‚¼åç§°","min-width":"180"}),t(h,{prop:"teamName",label:"éƒ¨è½åç§°",width:"150"}),t(h,{label:"æˆ‘çš„èº«ä»½",width:"100",align:"center"},{default:e(({row:l})=>[t(Z,{type:l.isLeader?"success":"info",size:"small"},{default:e(()=>[s(m(l.isLeader?"é…‹é•¿":"éƒ¨ä¸‹"),1)]),_:2},1032,["type"])]),_:1}),t(h,{label:"æŠ¥åçŠ¶æ€",width:"120",align:"center"},{default:e(({row:l})=>[l.registrationStatus!==void 0?(i(),_(Z,{key:0,type:d(l.registrationStatus),size:"small"},{default:e(()=>[s(m(y(l.registrationStatus)),1)]),_:2},1032,["type"])):(i(),z("span",We,"-"))]),_:1}),t(h,{label:"ä¸Šäº¤çŠ¶æ€",width:"100",align:"center"},{default:e(({row:l})=>[l.hasSubmission?(i(),_(Z,{key:0,type:"success",size:"small"},{default:e(()=>[...n[12]||(n[12]=[s(" å·²ä¸Šäº¤ ",-1)])]),_:1})):l.registrationStatus===1?(i(),_(Z,{key:1,type:"info",size:"small"},{default:e(()=>[...n[13]||(n[13]=[s(" æœªä¸Šäº¤ ",-1)])]),_:1})):(i(),z("span",et,"-"))]),_:1}),t(h,{label:"è¯„åˆ†",width:"100",align:"center"},{default:e(({row:l})=>[l.score!=null?(i(),z("span",tt,m(l.score),1)):(i(),z("span",nt,"æœªè¯„åˆ†"))]),_:1}),t(h,{label:"æ“ä½œ",width:"380",fixed:"right"},{default:e(({row:l})=>[t(u,{size:"small",onClick:O=>B(l.competitionId)},{default:e(()=>[...n[14]||(n[14]=[s("æŸ¥çœ‹è¯•ç‚¼",-1)])]),_:1},8,["onClick"]),t(u,{size:"small",type:"primary",onClick:O=>te(l.teamId)},{default:e(()=>[...n[15]||(n[15]=[s("ç®¡ç†éƒ¨è½",-1)])]),_:1},8,["onClick"]),l.isLeader?(i(),_(u,{key:0,size:"small",type:"success",onClick:O=>le(l.competitionId,l.teamId)},{default:e(()=>[s(m(l.hasSubmission?"é‡æ–°ä¸Šäº¤":"ä¸Šäº¤æˆ˜åˆ©å“"),1)]),_:2},1032,["onClick"])):P("",!0),l.score!=null?(i(),_(u,{key:1,size:"small",type:"warning",onClick:O=>f(l)},{default:e(()=>[...n[16]||(n[16]=[s(" æŸ¥çœ‹è¨æ»¡è¯„è¯­ ",-1)])]),_:1},8,["onClick"])):P("",!0)]),_:1})]),_:1},8,["data"])),[[de,C.value]]),D.value.length===0?(i(),_(E,{key:0,description:"æš‚æ— å‚æˆ˜è®°å½•ï¼Œå¿«å»éƒ¨è½æ‹›å‹Ÿå§ï¼"},{default:e(()=>[t(u,{type:"primary",onClick:ne},{default:e(()=>[...n[17]||(n[17]=[s("å‰å¾€éƒ¨è½æ‹›å‹Ÿ",-1)])]),_:1})]),_:1})):P("",!0)]),_:1}),t(j,{label:"æˆ‘çš„æ‹›å‹Ÿä»¤",name:"recruitments"},{default:e(()=>[n[20]||(n[20]=k("div",{class:"recruitment-summary"},null,-1)),t(A,{data:v.value,border:"",style:{"margin-top":"16px"}},{default:e(()=>[t(h,{prop:"competitionName",label:"è¯•ç‚¼åç§°"}),t(h,{prop:"title",label:"æ‹›å‹Ÿä»¤æ ‡é¢˜"}),t(h,{label:"æ‹›å‹Ÿæ•°é‡",width:"100"},{default:e(({row:l})=>[s(m(l.maxMembers)+"åª",1)]),_:1}),t(h,{label:"çŠ¶æ€",width:"100"},{default:e(({row:l})=>[t(Z,{type:p(l.status)},{default:e(()=>[s(m(L(l.status)),1)]),_:2},1032,["type"])]),_:1}),t(h,{label:"æ“ä½œ",width:"180"},{default:e(({row:l})=>[t(u,{size:"small",onClick:O=>ae(l.id)},{default:e(()=>[...n[18]||(n[18]=[s("æŸ¥çœ‹è¯¦æƒ…",-1)])]),_:1},8,["onClick"]),l.status===0?(i(),_(u,{key:0,size:"small",type:"danger",onClick:O=>ve(l.id)},{default:e(()=>[...n[19]||(n[19]=[s(" æ’¤å›æ‹›å‹Ÿä»¤ ",-1)])]),_:1},8,["onClick"])):P("",!0)]),_:1})]),_:1},8,["data"]),v.value.length===0?(i(),_(E,{key:0,description:"æš‚æ— æ‹›å‹Ÿä»¤å‘å¸ƒ"})):P("",!0)]),_:1})]),_:1},8,["modelValue"])])),t(be,{modelValue:R.value,"onUpdate:modelValue":n[6]||(n[6]=l=>R.value=l),title:"æˆ˜åˆ©å“è¯„åˆ†è¯¦æƒ…",width:"500px"},{footer:e(()=>[t(u,{type:"primary",onClick:n[5]||(n[5]=l=>R.value=!1)},{default:e(()=>[...n[21]||(n[21]=[s("ç¡®å®š",-1)])]),_:1})]),default:e(()=>[t(ye,{column:1,border:""},{default:e(()=>[t(K,{label:"è¯•ç‚¼åç§°"},{default:e(()=>[s(m(r.value?.competitionTitle||"-"),1)]),_:1}),t(K,{label:"éƒ¨è½åç§°"},{default:e(()=>[s(m(r.value?.teamName||"-"),1)]),_:1}),t(K,{label:"å¾—åˆ†"},{default:e(()=>[k("span",lt,m(r.value?.score),1)]),_:1}),t(K,{label:"è¨æ»¡è¯„è¯­"},{default:e(()=>[k("div",at,m(r.value?.comment||"æš‚æ— è¨æ»¡è¯„è¯­"),1)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},mt=Q(ot,[["__scopeId","data-v-e6fd4769"]]);export{mt as default};
