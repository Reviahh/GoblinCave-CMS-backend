import{_ as F,D as $,a as E,c as i,d as b,e as n,l as y,m as g,f as o,w as a,g as r,q as R,u as h,i as p,F as L,v as j,t as A}from"./index-LBqe1eNs.js";import{u as G}from"./team-DUt-q28F.js";import{useCompetitionStore as H}from"./competition-BeX1I71u.js";import"./competition-DDRzTI-D.js";const J={class:"team-detail"},K={style:{"margin-bottom":"10px"}},O={class:"hint"},P={__name:"TeamDetail",setup(Q){const S=$(),c=h(),v=G(),T=H(),w=Number(S.query.teamId),l=v.teams.find(m=>m.id===w),_=l?T.competitions.find(m=>m.id==l.compId):null,t=E(l?{id:l.id,compId:l.compId,name:l.name,leaderId:l.leaderId,members:l.members?l.members.map(m=>({...m})):[]}:{}),I=i(()=>_?.maxMembers??5),k=i(()=>1+(t.members?.length||0)),V=i(()=>k.value>=I.value),B=i(()=>`（${k.value}/${I.value}）`);function D(){V.value||t.members.push({userId:""})}function M(m){t.members.splice(m,1)}function N(){v.updateTeam(t.id,{name:t.name,members:t.members}),c.back()}function U(){_?.id?c.push({path:"/recruitments",query:{competitionId:_.id}}):c.push("/recruitments")}return(m,e)=>{const d=r("el-button"),f=r("el-input"),u=r("el-form-item"),q=r("el-form"),z=r("el-empty");return n(),b("div",J,[e[6]||(e[6]=y("h2",null,"部落详情",-1)),y("div",K,[o(d,{type:"primary",onClick:U},{default:a(()=>[...e[2]||(e[2]=[p("发起临时会话（寻找战友）",-1)])]),_:1})]),R(l)?(n(),g(q,{key:0,"label-width":"100px",model:t},{default:a(()=>[o(u,{label:"部落名称"},{default:a(()=>[o(f,{modelValue:t.name,"onUpdate:modelValue":e[0]||(e[0]=s=>t.name=s)},null,8,["modelValue"])]),_:1}),o(u,{label:"酋长"},{default:a(()=>[o(f,{modelValue:t.leaderId,"onUpdate:modelValue":e[1]||(e[1]=s=>t.leaderId=s),disabled:""},null,8,["modelValue"])]),_:1}),o(u,{label:"部下"},{default:a(()=>[(n(!0),b(L,null,j(t.members,(s,x)=>(n(),b("div",{key:x,class:"member-row"},[o(f,{modelValue:s.userId,"onUpdate:modelValue":C=>s.userId=C,placeholder:"部下代号",style:{width:"240px"}},null,8,["modelValue","onUpdate:modelValue"]),o(d,{type:"danger",size:"small",onClick:C=>M(x)},{default:a(()=>[...e[3]||(e[3]=[p("驱逐",-1)])]),_:1},8,["onClick"])]))),128)),o(d,{type:"primary",size:"small",onClick:D,disabled:V.value,class:"add-member-btn"},{default:a(()=>[...e[4]||(e[4]=[p(" 招募部下 ",-1)])]),_:1},8,["disabled"]),y("span",O,A(B.value),1)]),_:1}),o(u,null,{default:a(()=>[o(d,{type:"primary",onClick:N},{default:a(()=>[...e[5]||(e[5]=[p("保存",-1)])]),_:1})]),_:1})]),_:1},8,["model"])):(n(),g(z,{key:1,description:"未找到该部落"}))])}}},ee=F(P,[["__scopeId","data-v-85637c71"]]);export{ee as default};
